

--- 1、并发下，怎么保证mysql不插入重复数据：https://blog.csdn.net/runhua/article/details/100058042
在高并发场景中，经常会遇到并发重复数据插入同时又要保证唯一性的问题。本文分析了在MySQL的InnoDB引擎中解决这类的问题的4种思路和相关方案：

加唯一索引：有两种方案，一是新建表，而是改造表，目的都是能添加上唯一索引，由唯一索引来保证插入数据的唯一性，其中改造表方案比较优雅；
锁表：采用显式锁表和解锁表的语句LOCK TABLES和UNLOCK TABLES来保证并发重复数据插入的顺序性，从而保证插入数据的唯一性；
先检查再插入：主要利用MVCC + Nextkey锁来保证检查和插入加锁的关联来保证插入数据的唯一性；
采用insert ... select … 语句：利用insert ... select …原子执行的特点，再加上where子句实现了一种比较优雅的解决方案。
另外，除了上述利用MySQL本身机制的方案之外，还可以利用外部组件（比如redis，zookeeper）实现分布式锁，通过分布式锁实现并发重复插入的顺序性，从而保证插入数据的唯一性，类似于锁表思路。


--- 2、string builder内部怎么实现的
底层用char[]数组保存，append操作，基于数组的copy实现

